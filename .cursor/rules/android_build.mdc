---
alwaysApply: false
---
# Android 빌드 및 테스트 기기 설치 (한글 경로 대응)

사용자 폴더가 한글(예: `그리고`)이면 터미널에서 경로가 깨질 수 있으므로 **반드시 `$env:USERPROFILE` 기반 경로**로 진행한다.

## 1. 사전 조건

- **JAVA_HOME**: Android Studio JBR 사용. 미설정 시 아래 명령에서 설정.
- **Android Studio** 설치 및 SDK 설치 완료.
- 테스트 기기: USB 연결 또는 무선 디버깅(adb 연결) 완료.

## 2. 빌드 (PowerShell)

한 줄로 실행할 때:

```powershell
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"; $projectRoot = Join-Path $env:USERPROFILE "Desktop\MOVEIT"; $androidPath = Join-Path $projectRoot "android"; Set-Location $androidPath; .\gradlew.bat assembleDebug
```

- `$env:USERPROFILE` → `C:\Users\그리고` 등 한글 경로가 있어도 올바르게 해석됨.
- JAVA_HOME이 이미 시스템에 설정되어 있으면 앞의 `$env:JAVA_HOME = "..."` 생략 가능.
- 성공 시 APK 위치: `%USERPROFILE%\Desktop\MOVEIT\android\app\build\outputs\apk\debug\app-debug.apk`

**릴리스 AAB (Play 스토어 업로드용):**

```powershell
$env:JAVA_HOME = "C:\Program Files\Android\Android Studio\jbr"; $projectRoot = Join-Path $env:USERPROFILE "Desktop\MOVEIT"; $androidPath = Join-Path $projectRoot "android"; Set-Location $androidPath; .\gradlew.bat bundleRelease
```

- 성공 시 AAB 위치: `android\app\build\outputs\bundle\release\app-release.aab`

## 3. 테스트 기기 설치 (PowerShell)

연결된 기기 한 대에 설치(덮어쓰기 `-r`):

```powershell
$adb = Join-Path $env:LOCALAPPDATA "Android\Sdk\platform-tools\adb.exe"; $projectRoot = Join-Path $env:USERPROFILE "Desktop\MOVEIT"; $apk = Join-Path $projectRoot "android\app\build\outputs\apk\debug\app-debug.apk"; & $adb install -r $apk
```

- 기기가 여러 대면 `& $adb -s <device_id> install -r $apk` 로 기기 지정.
- 기기 목록: `& $adb devices`

## 4. 주의사항

- **한글 경로 직접 사용 금지**: `cd "c:\Users\그리고\Desktop\MOVEIT"` 처럼 한글을 쓴 경로는 스크립트/셸에서 깨질 수 있음. 항상 `Join-Path $env:USERPROFILE "Desktop\MOVEIT"` 형태 사용.
- **MoveitWebChromeClient**: `Bridge` 참조는 부모 클래스가 private 이므로, 서브클래스에서 `private final Bridge bridge` 로 보관하고 `bridge.getWebView()` 등으로 사용한다. `getBridge()` 는 부모에 없음.
- 빌드 실패 시: `BUILD FAILED` 로그에서 `:app:compileDebugJavaWithJavac` 오류 위치를 확인하고, 위 Java 규칙을 지키는지 점검.
