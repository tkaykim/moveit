# 푸시 알림 표시 방식 및 클릭 시 이동

## 1. 표시 방식 (Display style)

| 종류 | 설명 | 긴 글 | 사용 시점 |
|------|------|-------|-----------|
| **기본 (default)** | 상단바 아이콘 + 한 줄 제목/내용 요약. 펼치면 본문 일부. | 제한적 | 짧은 공지, 리마인더 |
| **긴 글 확장 (big_text)** | Android 확장 알림. 펼치면 본문 전체 표시. | ✅ | 공지, 이벤트 상세 등 |
| **시스템 팝업 (heads-up)** | 화면 상단에 잠깐 팝업으로 표시. 채널이 HIGH일 때. | 제목+일부 | 중요 알림 |

- **토스트**는 앱 내부에서만 쓰는 짧은 메시지(예: "저장됨")이며, FCM 푸시와는 별개.
- **인앱 팝업/모달**은 앱이 켜져 있을 때 푸시 수신 시 별도 UI로 띄우는 방식으로, 현재는 미구현. 필요 시 포그라운드 수신 리스너에서 처리 가능.

관리자 발송 시 선택: **기본** / **긴 글 확장**.

---

## 2. 클릭 시 이동 (Click action)

| 선택 | 설명 | 예시 |
|------|------|------|
| **이동 없음** | 알림 탭 시 앱만 열림(홈). | 단순 공지 |
| **앱 내 경로 (path)** | 앱 내 특정 화면으로 이동. | `/book`, `/notifications`, `/my` |
| **외부 URL (url)** | 브라우저 또는 인앱 웹뷰로 링크 오픈. | `https://...` |

- **path**: 슬래시로 시작하는 앱 내 라우트. 예: `/book`, `/notifications/123`
- **url**: `https://` 로 시작하면 외부 링크. 앱에서 WebView 또는 시스템 브라우저로 오픈 가능.

관리자 발송 시: **이동 없음** / **앱 내 경로** (입력) / **외부 URL** (입력).

---

## 3. 데이터 흐름

1. 관리자: 표시 스타일 + 클릭 시 이동(없음/경로/URL) 선택
2. API → Edge Function: `data.display_style`, `data.path`, `data.url` 전달
3. FCM: `data` 페이로드에 포함 → 앱 수신
4. 사용자가 알림 탭 → `pushNotificationActionPerformed` 에서 `data.path` 또는 `data.url` 읽어 라우팅/링크 오픈
